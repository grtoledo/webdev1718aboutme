<!DOCTYPE html>
<html>
    <head>
        <title>Using User Location</title>
    </head>
    <body>
        <p>Allow device access to your location for better experience?</p>
        <button type = "button" id = "button"> Yes</button>
        <br>

<!-- Handling User Location -->

        <!-- Ask for User Permission -->
        <script>
            button.onclick = function() {
                var startPos;
                var nudge = document.getElementById("nudge");
                var showNudgeBanner = function() {
                    nudge.style.display = "block";
                };
                
                var hideNudgeBanner = function() {
                    nudge.style.display = "none";
                };
                
                var nudgeTimeoutId = setTimeout(showNudgeBanner, 5000);
                
                var geoSuccess = function(position) {
                    hideNudgeBanner();
                    // We have the location, don't display banner
                    clearTimeout(nudgeTimeoutId);
                    console.log("We have permission");
                    
                    // Do magic with location
                    startPos = position;
                    document.getElementById('startLat').innerHTML = startPos.coords.latitude;
                    document.getElementById('startLon').innerHTML = startPos.coords.longitude;
                };
                
                var geoError = function(error) {
                    switch(error.code) {
                        case error.TIMEOUT:
                            // The user didn't accept the callout
                            showNudgeBanner();
                            break;
                    }
                };
                
                navigator.geolocation.getCurrentPosition(geoSuccess, geoError);
            };
        </script>
        
        <!-- Check if Geolocation is supported -->
        <script>
            // check for Geolocation support
            if (navigator.geolocation) {
                console.log('Geolocation is supported!');
            }
            else {
                console.log('Geolocation is not supported for this Browser/OS.');
            }
        </script>
        
        <!-- Determine User's Location -->
        <script>
            window.onload = function() {
                var startPos;
                var geoSuccess = function(position) {
                    startPos = position;
                    document.getElementById('startLat').innerHTML = startPos.coords.latitude;
                    document.getElementById('startLon').innerHTML = startPos.coords.longitude;
                };
                navigator.geolocation.getCurrentPosition(geoSuccess);
            };
        </script>
        
        <!-- Errors -->
        <script>
            window.onload = function() {
                var startPos;
                var geoSuccess = function(position) {
                    startPos = position;
                    document.getElementById('startLat').innerHTML = startPos.coords.latitude;
                    document.getElementById('startLon').innerHTML = startPos.coords.longitude;
                };
                var geoError = function(error) {
                    console.log('Error occurred. Error code: ' + error.code);
                    // error.code can be:
                    //   0: unknown error
                    //   1: permission denied
                    //   2: position unavailable (error response from location provider)
                    //   3: timed out
                };
                
                navigator.geolocation.getCurrentPosition(geoSuccess, geoError);
            };
        </script>
        
        <!-- Reduce the need to start geolocation hardware -->
        <script>
            window.onload = function() {
                var startPos;
                var geoOptions = {
                    maximumAge: 5 * 60 * 1000,
                }
                
                var geoSuccess = function(position) {
                    startPos = position;
                    document.getElementById('startLat').innerHTML = startPos.coords.latitude;
                    document.getElementById('startLon').innerHTML = startPos.coords.longitude;
                };
                
                var geoError = function(error) {
                    console.log('Error occurred. Error code: ' + error.code);
                    // error.code can be:
                    //   0: unknown error
                    //   1: permission denied
                    //   2: position unavailable (error response from location provider)
                    //   3: timed out
                };
                
                navigator.geolocation.getCurrentPosition(geoSuccess, geoError, geoOptions);
            };
        </script>
        
        <!-- Don't keep the user waiting, set a timeout -->
        <script>
            window.onload = function() {
                var startPos;
                var geoOptions = {
                    timeout: 10 * 1000
                }
                var geoSuccess = function(position) {
                    startPos = position;
                    document.getElementById('startLat').innerHTML = startPos.coords.latitude;
                    document.getElementById('startLon').innerHTML = startPos.coords.longitude;
                };
                
                var geoError = function(error) {
                    console.log('Error occurred. Error code: ' + error.code);
                    // error.code can be:
                    //   0: unknown error
                    //   1: permission denied
                    //   2: position unavailable (error response from location provider)
                    //   3: timed out
                };
                
                navigator.geolocation.getCurrentPosition(geoSuccess, geoError, geoOptions);
            };
        </script>
        
        <!-- Prefer a coarse location over a fine-grained location -->
        <script>
            window.onload = function() {
                var startPos;
                var geoOptions = {
                    enableHighAccuracy: true
                }
                
                var geoSuccess = function(position) {
                    startPos = position;
                    document.getElementById('startLat').innerHTML = startPos.coords.latitude;
                    document.getElementById('startLon').innerHTML = startPos.coords.longitude;
                };
                
                var geoError = function(error) {
                    console.log('Error occurred. Error code: ' + error.code);
                    // error.code can be:
                    //   0: unknown error
                    //   1: permission denied
                    //   2: position unavailable (error response from location provider)
                    //   3: timed out
                };
                
                navigator.geolocation.getCurrentPosition(geoSuccess, geoError, geoOptions);
            };
        </script>

<!-- Device Orientation & Motion -->

        <!--  -->
        <script>
            
        </script>
        
        <!--  -->
        <script>
            
        </script>
        
        <!--  -->
        <script>
            
        </script>
    </body>
</html>