<!DOCTYPE html>
<html>
    <head>
        <title></title>
    </head>
    <body>
        <script>
            function hasGetUserMedia() {
                return !!(navigator.mediaDevices && navigator.mediaDevices.getUserMedia);
            }
            
            if (hasGetUserMedia()) {
                // Good to go!
            } else {
                alert('getUserMedia() is not supported by your browser');
            }
        </script>
        
        <input type="file" accept="image/*" id="file-input">
        
        <script>
            const fileInput = document.getElementById('file-input');
            fileInput.addEventListener('change', (e) => doSomethingWithFiles(e.target.files));
        </script>
        
        <br>
        <br>
        <div id="target">You can drag an image file here</div>
            <script>
                const target = document.getElementById('target');
                
                target.addEventListener('drop', (e) => {
                    e.stopPropagation();
                    e.preventDefault();
                    
                    doSomethingWithFiles(e.dataTransfer.files);
                });
                
                target.addEventListener('dragover', (e) => {
                    e.stopPropagation();
                    e.preventDefault();
                    
                    e.dataTransfer.dropEffect = 'copy';
                });
            </script>
            
            <br>
            <textarea id="target">Paste an image here</textarea>
            
            <script>
                const target = document.getElementById('target');
                
                target.addEventListener('paste', (e) => {
                    e.preventDefault();
                    doSomethingWithFiles(e.clipboardData.files);
                });
            </script>
            
            <img id="output">
            <p> img id output</p>
            <script>
                const output = document.getElementById('output');
                
                function doSomethingWithFiles(fileList) {
                    let file = null;
                    
                    for (let i = 0; i < fileList.length; i++) {
                        if (fileList[i].type.match(/^image\//)) {
                            file = fileList[i];
                            break;
                        }
                    }
                    
                    if (file !== null) {
                        output.src = URL.createObjectURL(file);
                    }
                }
            </script>
            
            <script>
                const supported = 'mediaDevices' in navigator;
            </script>
            
            <video id="player" controls autoplay></video>
            <script>
                const player = document.getElementById('player');
                
                const constraints = {
                    video: true,
                };
                
                navigator.mediaDevices.getUserMedia(constraints)
                .then((stream) => {
                    player.srcObject = stream;
                });
            </script>
            
            <video id="player" controls autoplay></video>
            <button id="capture">Capture</button>
            <canvas id="canvas" width=320 height=240></canvas>
            
            <script>
            const player = document.getElementById('player');
            const canvas = document.getElementById('canvas');
            const context = canvas.getContext('2d');
            const captureButton = document.getElementById('capture');
            
            getUserMedia();
            
            const constraints = {
                video: true,
            };
            
            captureButton.addEventListener('click', () => {
                // Draw the video frame to the canvas.
                context.drawImage(player, 0, 0, canvas.width, canvas.height);
                
                // Stop all video streams.
                player.srcObject.getVideoTracks().forEach(track => track.stop());
            });
            
            // Attach the video stream to the video element and autoplay.
            navigator.mediaDevices.getUserMedia(constraints)
            .then((stream) => {
                player.srcObject = stream;
            });
            </script>
    </body>
</html>